{"ast":null,"code":"import{useState}from'react';import{Camera,CameraResultType}from'@capacitor/camera';import{Geolocation}from'@capacitor/geolocation';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PhotoCapture=_ref=>{let{onCapture}=_ref;const[photos,setPhotos]=useState([]);const takePhoto=async index=>{const image=await Camera.getPhoto({quality:90,allowEditing:false,resultType:CameraResultType.Uri});const coordinates=await Geolocation.getCurrentPosition();const photoData={imageUrl:image.webPath,latitude:coordinates.coords.latitude,longitude:coordinates.coords.longitude};const newPhotos=[...photos];if(index!==undefined){newPhotos[index]=photoData;}else{newPhotos.push(photoData);}setPhotos(newPhotos);onCapture(newPhotos);};const startOver=()=>{setPhotos([]);onCapture([]);};return/*#__PURE__*/_jsxs(\"div\",{children:[photos.length<4&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>takePhoto(),children:\"Take Photo\"}),photos.length===4&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:startOver,children:\"Start Over\"}),photos.map((photo,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:photo.imageUrl,alt:\"Photo \".concat(index+1)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Lat: \",photo.latitude,\", Lng: \",photo.longitude]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>takePhoto(index),children:[\"Retake Photo \",index+1]})]},index))]})]});};export default PhotoCapture;","map":{"version":3,"names":["useState","Camera","CameraResultType","Geolocation","jsx","_jsx","jsxs","_jsxs","PhotoCapture","_ref","onCapture","photos","setPhotos","takePhoto","index","image","getPhoto","quality","allowEditing","resultType","Uri","coordinates","getCurrentPosition","photoData","imageUrl","webPath","latitude","coords","longitude","newPhotos","undefined","push","startOver","children","length","onClick","map","photo","src","alt","concat"],"sources":["/Users/buddychin/Desktop/geofence-photo/photo-geo-pwa/src/PhotoCapture.js"],"sourcesContent":["import { useState } from 'react';\nimport { Camera, CameraResultType } from '@capacitor/camera';\nimport { Geolocation } from '@capacitor/geolocation';\n\nconst PhotoCapture = ({ onCapture }) => {\n  const [photos, setPhotos] = useState([]);\n\n  const takePhoto = async (index) => {\n    const image = await Camera.getPhoto({\n      quality: 90,\n      allowEditing: false,\n      resultType: CameraResultType.Uri\n    });\n\n    const coordinates = await Geolocation.getCurrentPosition();\n\n    const photoData = {\n      imageUrl: image.webPath,\n      latitude: coordinates.coords.latitude,\n      longitude: coordinates.coords.longitude\n    };\n\n    const newPhotos = [...photos];\n    if (index !== undefined) {\n      newPhotos[index] = photoData;\n    } else {\n      newPhotos.push(photoData);\n    }\n\n    setPhotos(newPhotos);\n    onCapture(newPhotos);\n  };\n\n  const startOver = () => {\n    setPhotos([]);\n    onCapture([]);\n  };\n\n  return (\n    <div>\n      {photos.length < 4 && <button onClick={() => takePhoto()}>Take Photo</button>}\n      {photos.length === 4 && (\n        <div>\n          <button onClick={startOver}>Start Over</button>\n          {photos.map((photo, index) => (\n            <div key={index}>\n              <img src={photo.imageUrl} alt={`Photo ${index + 1}`} />\n              <p>Lat: {photo.latitude}, Lng: {photo.longitude}</p>\n              <button onClick={() => takePhoto(index)}>Retake Photo {index + 1}</button>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PhotoCapture;"],"mappings":"AAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,MAAM,CAAEC,gBAAgB,KAAQ,mBAAmB,CAC5D,OAASC,WAAW,KAAQ,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAmB,IAAlB,CAAEC,SAAU,CAAC,CAAAD,IAAA,CACjC,KAAM,CAACE,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAExC,KAAM,CAAAa,SAAS,CAAG,KAAO,CAAAC,KAAK,EAAK,CACjC,KAAM,CAAAC,KAAK,CAAG,KAAM,CAAAd,MAAM,CAACe,QAAQ,CAAC,CAClCC,OAAO,CAAE,EAAE,CACXC,YAAY,CAAE,KAAK,CACnBC,UAAU,CAAEjB,gBAAgB,CAACkB,GAC/B,CAAC,CAAC,CAEF,KAAM,CAAAC,WAAW,CAAG,KAAM,CAAAlB,WAAW,CAACmB,kBAAkB,CAAC,CAAC,CAE1D,KAAM,CAAAC,SAAS,CAAG,CAChBC,QAAQ,CAAET,KAAK,CAACU,OAAO,CACvBC,QAAQ,CAAEL,WAAW,CAACM,MAAM,CAACD,QAAQ,CACrCE,SAAS,CAAEP,WAAW,CAACM,MAAM,CAACC,SAChC,CAAC,CAED,KAAM,CAAAC,SAAS,CAAG,CAAC,GAAGlB,MAAM,CAAC,CAC7B,GAAIG,KAAK,GAAKgB,SAAS,CAAE,CACvBD,SAAS,CAACf,KAAK,CAAC,CAAGS,SAAS,CAC9B,CAAC,IAAM,CACLM,SAAS,CAACE,IAAI,CAACR,SAAS,CAAC,CAC3B,CAEAX,SAAS,CAACiB,SAAS,CAAC,CACpBnB,SAAS,CAACmB,SAAS,CAAC,CACtB,CAAC,CAED,KAAM,CAAAG,SAAS,CAAGA,CAAA,GAAM,CACtBpB,SAAS,CAAC,EAAE,CAAC,CACbF,SAAS,CAAC,EAAE,CAAC,CACf,CAAC,CAED,mBACEH,KAAA,QAAA0B,QAAA,EACGtB,MAAM,CAACuB,MAAM,CAAG,CAAC,eAAI7B,IAAA,WAAQ8B,OAAO,CAAEA,CAAA,GAAMtB,SAAS,CAAC,CAAE,CAAAoB,QAAA,CAAC,YAAU,CAAQ,CAAC,CAC5EtB,MAAM,CAACuB,MAAM,GAAK,CAAC,eAClB3B,KAAA,QAAA0B,QAAA,eACE5B,IAAA,WAAQ8B,OAAO,CAAEH,SAAU,CAAAC,QAAA,CAAC,YAAU,CAAQ,CAAC,CAC9CtB,MAAM,CAACyB,GAAG,CAAC,CAACC,KAAK,CAAEvB,KAAK,gBACvBP,KAAA,QAAA0B,QAAA,eACE5B,IAAA,QAAKiC,GAAG,CAAED,KAAK,CAACb,QAAS,CAACe,GAAG,UAAAC,MAAA,CAAW1B,KAAK,CAAG,CAAC,CAAG,CAAE,CAAC,cACvDP,KAAA,MAAA0B,QAAA,EAAG,OAAK,CAACI,KAAK,CAACX,QAAQ,CAAC,SAAO,CAACW,KAAK,CAACT,SAAS,EAAI,CAAC,cACpDrB,KAAA,WAAQ4B,OAAO,CAAEA,CAAA,GAAMtB,SAAS,CAACC,KAAK,CAAE,CAAAmB,QAAA,EAAC,eAAa,CAACnB,KAAK,CAAG,CAAC,EAAS,CAAC,GAHlEA,KAIL,CACN,CAAC,EACC,CACN,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAN,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}