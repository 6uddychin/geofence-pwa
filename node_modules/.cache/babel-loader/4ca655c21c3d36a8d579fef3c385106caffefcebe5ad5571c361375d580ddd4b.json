{"ast":null,"code":"import React,{useState,useEffect}from'react';import PhotoCapture from'./PhotoCapture';import Map from'./Map';import'./App.css';import amznLogo from'./assets/amzn_logo.png';// Ensure this path is correct\nimport sendEmail from'./EmailService';// Import the email service\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[coordinates,setCoordinates]=useState([]);const[isConfirmed,setIsConfirmed]=useState(false);const[photos,setPhotos]=useState([]);const[userLocation,setUserLocation]=useState(null);const[zoomIn,setZoomIn]=useState(false);useEffect(()=>{// Get user's current location\nnavigator.geolocation.getCurrentPosition(position=>{setUserLocation({latitude:position.coords.latitude,longitude:position.coords.longitude});},error=>{console.error('Error getting user location:',error);});},[]);const handleCapture=capturedPhotos=>{const updatedCoordinates=capturedPhotos.map(photo=>({...photo,latitude:photo.latitude,longitude:photo.longitude}));setCoordinates(updatedCoordinates);setPhotos(capturedPhotos);if(capturedPhotos.length===4){setZoomIn(true);setIsConfirmed(false);}else{setZoomIn(false);}};const handleConfirm=async mapImage=>{setIsConfirmed(true);sendEmail(photos,coordinates,mapImage);// Handle confirmed bounding box, e.g., save to server\n};const handleStartOver=()=>{setCoordinates([]);setPhotos([]);setIsConfirmed(false);setZoomIn(false);};const handleRetake=index=>{setIsConfirmed(false);setZoomIn(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(\"img\",{src:amznLogo,alt:\"Amazon Logo\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Photo Geo Logger\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"instructions\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"You will need to take 4 images from each corner of the desired geofence\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"To take a photo, simply press the blue camera icon\"}),/*#__PURE__*/_jsx(\"li\",{children:\"To retake a photo, simply press the green camera icon\"})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"divider\"})]}),!isConfirmed&&/*#__PURE__*/_jsx(PhotoCapture,{onCapture:handleCapture}),userLocation&&/*#__PURE__*/_jsx(\"div\",{className:\"map-container\",children:/*#__PURE__*/_jsx(Map,{userLocation:userLocation,coordinates:coordinates,onConfirm:handleConfirm,onStartOver:handleStartOver,onRetake:handleRetake,zoomIn:zoomIn})}),coordinates.length===4&&!isConfirmed&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleConfirm(),disabled:coordinates.length!==4,children:\"Submit\"})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","PhotoCapture","Map","amznLogo","sendEmail","jsx","_jsx","jsxs","_jsxs","App","coordinates","setCoordinates","isConfirmed","setIsConfirmed","photos","setPhotos","userLocation","setUserLocation","zoomIn","setZoomIn","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","error","console","handleCapture","capturedPhotos","updatedCoordinates","map","photo","length","handleConfirm","mapImage","handleStartOver","handleRetake","index","className","children","src","alt","onCapture","onConfirm","onStartOver","onRetake","onClick","disabled"],"sources":["/Users/buddychin/Desktop/geofence-photo/photo-geo-pwa/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PhotoCapture from './PhotoCapture';\nimport Map from './Map';\nimport './App.css';\nimport amznLogo from './assets/amzn_logo.png'; // Ensure this path is correct\nimport sendEmail from './EmailService'; // Import the email service\n\nconst App = () => {\n  const [coordinates, setCoordinates] = useState([]);\n  const [isConfirmed, setIsConfirmed] = useState(false);\n  const [photos, setPhotos] = useState([]);\n  const [userLocation, setUserLocation] = useState(null);\n  const [zoomIn, setZoomIn] = useState(false);\n\n  useEffect(() => {\n    // Get user's current location\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        setUserLocation({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude,\n        });\n      },\n      (error) => {\n        console.error('Error getting user location:', error);\n      }\n    );\n  }, []);\n\n  const handleCapture = (capturedPhotos) => {\n    const updatedCoordinates = capturedPhotos.map(photo => ({ ...photo, latitude: photo.latitude, longitude: photo.longitude }));\n    setCoordinates(updatedCoordinates);\n    setPhotos(capturedPhotos);\n    if (capturedPhotos.length === 4) {\n      setZoomIn(true);\n      setIsConfirmed(false);\n    } else {\n      setZoomIn(false);\n    }\n  };\n\n  const handleConfirm = async (mapImage) => {\n    setIsConfirmed(true);\n    sendEmail(photos, coordinates, mapImage);\n    // Handle confirmed bounding box, e.g., save to server\n  };\n\n  const handleStartOver = () => {\n    setCoordinates([]);\n    setPhotos([]);\n    setIsConfirmed(false);\n    setZoomIn(false);\n  };\n\n  const handleRetake = (index) => {\n    setIsConfirmed(false);\n    setZoomIn(false);\n  };\n\n  return (\n    <div className=\"App\">\n      <header>\n        <img src={amznLogo} alt=\"Amazon Logo\" />\n        <h1>Photo Geo Logger</h1>\n      </header>\n      <div className='instructions'>\n        <p>You will need to take 4 images from each corner of the desired geofence</p>\n        <ul>\n          <li>To take a photo, simply press the blue camera icon</li>\n          <li>To retake a photo, simply press the green camera icon</li>\n        </ul>\n        <hr className='divider' />\n      </div>\n      {!isConfirmed && <PhotoCapture onCapture={handleCapture} />}\n      {userLocation && (\n        <div className=\"map-container\">\n          <Map\n            userLocation={userLocation}\n            coordinates={coordinates}\n            onConfirm={handleConfirm}\n            onStartOver={handleStartOver}\n            onRetake={handleRetake}\n            zoomIn={zoomIn}\n          />\n        </div>\n      )}\n      {coordinates.length === 4 && !isConfirmed && (\n        <button onClick={() => handleConfirm()} disabled={coordinates.length !== 4}>Submit</button>\n      )}\n    </div>\n  );\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}